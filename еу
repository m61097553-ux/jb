    public static Map<String, FieldMasking> load(
            Context context,
            char defaultMaskChar
    ) {
        if (context == null) return Map.of();

        String fieldsCsv = context.getProperty("MASK_FIELDS");
        if (fieldsCsv == null || fieldsCsv.isBlank()) {
            return Map.of();
        }

        Map<String, FieldMasking> result = new LinkedHashMap<>();

        for (String rawField : fieldsCsv.split(",")) {
            String field = rawField.trim();
            if (field.isEmpty()) continue;

            FieldMasking fm = new FieldMasking();
            fm.setFieldName(field);

            // maskAll
            fm.setMaskAll(boolProp(context, key(field, "maskAll"), false));

            // maskKey
            fm.setMaskKey(boolProp(context, key(field, "maskKey"), false));

            // maskChar (fallback на default)
            String maskCharProp = context.getProperty(key(field, "maskChar"));
            if (maskCharProp != null && !maskCharProp.isBlank()) {
                fm.setMaskChar(maskCharProp.charAt(0));
            } else {
                fm.setMaskChar(defaultMaskChar);
            }

            // maskStartIndex
            fm.setMaskStartIndex(intProp(context, key(field, "maskStartIndex")));

            // maskEndIndex
            fm.setMaskEndIndex(intProp(context, key(field, "maskEndIndex")));

            result.put(field, fm);
        }

        return result;
    }

    // ---------- helpers ----------

    private static String key(String field, String prop) {
        return "mask." + field + "." + prop;
    }

    private static boolean boolProp(Context ctx, String key, boolean def) {
        String v = ctx.getProperty(key);
        return (v == null) ? def : Boolean.parseBoolean(v.trim());
    }

    private static Integer intProp(Context ctx, String key) {
        String v = ctx.getProperty(key);
        if (v == null || v.isBlank()) return null;
        try {
            return Integer.parseInt(v.trim());
        } catch (NumberFormatException e) {
            return null;
        }
    }
